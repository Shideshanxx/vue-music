{"version":3,"sources":["webpack:///./src/components/music-list/music-list.vue?08b2","webpack:///src/components/music-list/music-list.vue","webpack:///./src/components/music-list/music-list.vue?ab3c","webpack:///./src/components/music-list/music-list.vue","webpack:///./src/components/top-list/top-list.vue?64d1","webpack:///./src/api/rank.js","webpack:///./src/components/music-list/music-list.vue?1e44","webpack:///./src/components/top-list/top-list.vue?3bc7","webpack:///src/components/top-list/top-list.vue","webpack:///./src/components/top-list/top-list.vue?cab1","webpack:///./src/components/top-list/top-list.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","back","domProps","_s","title","ref","style","directives","name","rawName","value","songs","length","expression","random","_v","attrs","listenScroll","probeType","scroll","rank","selectItem","staticRenderFns","mixins","props","bgImage","type","String","default","Array","Boolean","data","scrollY","computed","bgStyle","created","mounted","imageHeight","$refs","clientHeight","minTransalteY","RESERVED_HEIGHT","list","$el","top","methods","handlePlaylist","bottom","refresh","$router","randomPlay","pos","y","selectPlay","index","watch","newVal","scale","percent","zIndex","blur","Math","min","layer","transform","filter","backdrop","paddingTop","height","playBtn","display","components","Scroll","Loading","SongList","component","getTopList","url","Object","assign","commonParams","uin","needNewCode","platform","jsonp","options","getMusicList","topid","tpl","page","topList","topTitle","image","_getMusicList","id","res","code","push","_normalizeSongs","forEach","ret","MusicList"],"mappings":"yIAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,OAAOC,GAAG,CAAC,MAAQP,EAAIQ,OAAO,CAACJ,EAAG,IAAI,CAACE,YAAY,gBAAgBF,EAAG,KAAK,CAACE,YAAY,QAAQG,SAAS,CAAC,UAAYT,EAAIU,GAAGV,EAAIW,UAAUP,EAAG,MAAM,CAACQ,IAAI,UAAUN,YAAY,WAAWO,MAAOb,EAAW,SAAG,CAACI,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACU,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOjB,EAAIkB,MAAMC,OAAS,EAAGC,WAAW,qBAAqBR,IAAI,UAAUN,YAAY,OAAOC,GAAG,CAAC,MAAQP,EAAIqB,SAAS,CAACjB,EAAG,IAAI,CAACE,YAAY,cAAcF,EAAG,OAAO,CAACE,YAAY,QAAQ,CAACN,EAAIsB,GAAG,gBAAgBlB,EAAG,MAAM,CAACQ,IAAI,SAASN,YAAY,aAAaF,EAAG,MAAM,CAACQ,IAAI,QAAQN,YAAY,aAAaF,EAAG,SAAS,CAACQ,IAAI,OAAON,YAAY,OAAOiB,MAAM,CAAC,KAAOvB,EAAIkB,MAAM,gBAAgBlB,EAAIwB,aAAa,aAAaxB,EAAIyB,WAAWlB,GAAG,CAAC,OAASP,EAAI0B,SAAS,CAACtB,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,YAAY,CAACmB,MAAM,CAAC,MAAQvB,EAAIkB,MAAM,KAAOlB,EAAI2B,MAAMpB,GAAG,CAAC,OAASP,EAAI4B,eAAe,GAAGxB,EAAG,MAAM,CAACU,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,OAAQjB,EAAIkB,MAAMC,OAAQC,WAAW,kBAAkBd,YAAY,qBAAqB,CAACF,EAAG,YAAY,MAAM,IACxrCyB,EAAkB,G,gGC+CtB,KACA,8BACA,oCACA,GACEC,OAAQ,CAAC,EAAX,MACEC,MAAO,CACLC,QAAS,CACPC,KAAMC,OACNC,QAAS,IAEXjB,MAAO,CACLe,KAAMG,MACND,QAFN,WAGQ,MAAO,KAGXxB,MAAO,CACLsB,KAAMC,OACNC,QAAS,IAEXR,KAAM,CACJM,KAAMI,QACNF,SAAS,IAGbG,KAtBF,WAuBI,MAAO,CACLC,QAAS,IAGbC,SAAU,CACRC,QADJ,WAEM,MAAO,wBAAb,2BAGEC,QAhCF,WAiCIzC,KAAKwB,UAAY,EACjBxB,KAAKuB,cAAe,GAEtBmB,QApCF,WAqCI1C,KAAK2C,YAAc3C,KAAK4C,MAAMb,QAAQc,aAEtC7C,KAAK8C,eAAiB9C,KAAK2C,YAAcI,EACzC/C,KAAK4C,MAAMI,KAAKC,IAAIrC,MAAMsC,IAAM,GAApC,+BAEEC,QAAS,OAAX,OAAW,CAAX,CACIC,eADJ,SACA,GACM,IAAN,uBACMpD,KAAK4C,MAAMI,KAAKC,IAAIrC,MAAMyC,OAASA,EACnCrD,KAAK4C,MAAMI,KAAKM,WAElB/C,KANJ,WAOMP,KAAKuD,QAAQhD,QAEfa,OATJ,WAUMpB,KAAKwD,WAAW,CACdR,KAAMhD,KAAKiB,SAGfQ,OAdJ,SAcA,GACMzB,KAAKsC,QAAUmB,EAAIC,GAErB/B,WAjBJ,SAiBA,KACM3B,KAAK2D,WAAW,CACdX,KAAMhD,KAAKiB,MACX2C,MAAR,MAGA,6CAEEC,MAAO,CACLvB,QADJ,SACA,GACM,IAAN,iCACA,IACA,IACA,IACA,+BACUwB,EAAS,GAGXC,EAAQ,EAAIC,EACZC,EAAS,IAGTC,EAAOC,KAAKC,IAAI,GAAc,GAAVJ,GAGtBhE,KAAK4C,MAAMyB,MAAMzD,MAAM0D,GAAa,iBAA1C,kBACMtE,KAAK4C,MAAM2B,OAAO3D,MAAM4D,GAAY,QAA1C,gBAEUV,EAAS9D,KAAK8C,eAChBmB,EAAS,GACTjE,KAAK4C,MAAMb,QAAQnB,MAAM6D,WAAa,EACtCzE,KAAK4C,MAAMb,QAAQnB,MAAM8D,OAAS,GAA1C,eACQ1E,KAAK4C,MAAM+B,QAAQ/D,MAAMgE,QAAU,SAEnC5E,KAAK4C,MAAMb,QAAQnB,MAAM6D,WAAa,MACtCzE,KAAK4C,MAAMb,QAAQnB,MAAM8D,OAAS,EAClC1E,KAAK4C,MAAM+B,QAAQ/D,MAAMgE,QAAU,IAErC5E,KAAK4C,MAAMb,QAAQnB,MAAM0D,GAAa,SAA5C,cACMtE,KAAK4C,MAAMb,QAAQnB,MAAMqD,OAASA,IAGtCY,WAAY,CACVC,OAAJ,OACIC,QAAJ,OACIC,SAAJ,SC3JmW,I,wBCQ/VC,EAAY,eACd,EACAnF,EACA8B,GACA,EACA,KACA,WACA,MAIa,OAAAqD,E,6CCnBf,W,oCCAA,gGAIO,SAASC,IACd,IAAMC,EAAM,qDAEN9C,EAAO+C,OAAOC,OAAO,GAAIC,OAAc,CAC3CC,IAAK,EACLC,YAAa,EACbC,SAAU,OAGZ,OAAOC,eAAMP,EAAK9C,EAAMsD,QAInB,SAASC,EAAcC,GAC5B,IAAMV,EAAM,sDAEN9C,EAAO+C,OAAOC,OAAO,GAAIC,OAAc,CAC3CO,QACAL,YAAa,EACbD,IAAK,EACLO,IAAK,EACLC,KAAM,SACN/D,KAAM,MACNyD,SAAU,OAGZ,OAAOC,eAAMP,EAAK9C,EAAMsD,U,kCC9B1B,W,gECAA,IAAI7F,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,aAAa,CAACmB,MAAM,CAAC,OAAS,GAAG,KAAO,UAAU,CAACnB,EAAG,aAAa,CAACmB,MAAM,CAAC,KAAOvB,EAAI2B,KAAK,MAAQ3B,EAAIW,MAAM,WAAWX,EAAIgC,QAAQ,MAAQhC,EAAIkB,UAAU,IACzPW,EAAkB,G,8FCgBtB,GACEW,SAAU,OAAZ,OAAY,CAAZ,CACI7B,MADJ,WAEM,OAAOV,KAAKgG,QAAQC,UAEtBlE,QAJJ,WAKM,OAAI/B,KAAKiB,MAAMC,OACNlB,KAAKiB,MAAM,GAAGiF,MAEhB,KAEb,6BAEE7D,KAbF,WAcI,MAAO,CACLpB,MAAO,GACPS,MAAM,IAGVe,QAnBF,WAoBIzC,KAAKmG,iBAEPhD,QAAS,CACPgD,cADJ,WACA,WACWnG,KAAKgG,QAAQI,GAIlB,OAAN,OAAM,CAAN,mCACYC,EAAIC,OAAS,EAAzB,MACU,OAAV,OAAU,CAAV,iDACY,EAAZ,cANQtG,KAAKuD,QAAQgD,KAAK,UAWtBC,gBAdJ,SAcA,GACM,IAAN,KAOM,OANAxD,EAAKyD,SAAQ,SAAnB,GACQ,IAAR,SACY,OAAZ,OAAY,CAAZ,IACUC,EAAIH,KAAK,OAAnB,OAAmB,CAAnB,OAGaG,IAGX7B,WAAY,CACV8B,UAAJ,SCjEiW,I,wBCQ7V1B,EAAY,eACd,EACAnF,EACA8B,GACA,EACA,KACA,WACA,MAIa,aAAAqD,E","file":"js/chunk-c52acdda.0385016b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"music-list\"},[_c('div',{staticClass:\"back\",on:{\"click\":_vm.back}},[_c('i',{staticClass:\"icon-back\"})]),_c('h1',{staticClass:\"title\",domProps:{\"innerHTML\":_vm._s(_vm.title)}}),_c('div',{ref:\"bgImage\",staticClass:\"bg-image\",style:(_vm.bgStyle)},[_c('div',{staticClass:\"play-wrapper\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.songs.length > 0),expression:\"songs.length > 0\"}],ref:\"playBtn\",staticClass:\"play\",on:{\"click\":_vm.random}},[_c('i',{staticClass:\"icon-play\"}),_c('span',{staticClass:\"text\"},[_vm._v(\"随机播放全部\")])])]),_c('div',{ref:\"filter\",staticClass:\"filter\"})]),_c('div',{ref:\"layer\",staticClass:\"bg-layer\"}),_c('scroll',{ref:\"list\",staticClass:\"list\",attrs:{\"data\":_vm.songs,\"listen-scroll\":_vm.listenScroll,\"probe-type\":_vm.probeType},on:{\"scroll\":_vm.scroll}},[_c('div',{staticClass:\"song-list-wrapper\"},[_c('song-list',{attrs:{\"songs\":_vm.songs,\"rank\":_vm.rank},on:{\"select\":_vm.selectItem}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.songs.length),expression:\"!songs.length\"}],staticClass:\"loading-container\"},[_c('loading')],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"music-list\">\r\n    <div class=\"back\" @click=\"back\">\r\n      <i class=\"icon-back\"></i>\r\n    </div>\r\n    <h1 class=\"title\" v-html=\"title\"></h1>\r\n    <div class=\"bg-image\" :style=\"bgStyle\" ref=\"bgImage\">\r\n      <div class=\"play-wrapper\">\r\n        <div\r\n          ref=\"playBtn\"\r\n          v-show=\"songs.length > 0\"\r\n          class=\"play\"\r\n          @click=\"random\"\r\n        >\r\n          <i class=\"icon-play\"></i>\r\n          <span class=\"text\">随机播放全部</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"filter\" ref=\"filter\"></div>\r\n    </div>\r\n    <div class=\"bg-layer\" ref=\"layer\"></div>\r\n    <scroll\r\n      :data=\"songs\"\r\n      @scroll=\"scroll\"\r\n      :listen-scroll=\"listenScroll\"\r\n      :probe-type=\"probeType\"\r\n      class=\"list\"\r\n      ref=\"list\"\r\n    >\r\n      <div class=\"song-list-wrapper\">\r\n        <song-list :songs=\"songs\" :rank=\"rank\" @select=\"selectItem\"></song-list>\r\n      </div>\r\n      <div v-show=\"!songs.length\" class=\"loading-container\">\r\n        <loading></loading>\r\n      </div>\r\n    </scroll>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Scroll from \"base/scroll/scroll\";\r\nimport Loading from \"base/loading/loading\";\r\nimport SongList from \"base/song-list/song-list\";\r\n// 适配不同浏览器\r\nimport { prefixStyle } from \"common/js/dom\";\r\nimport { mapActions } from \"vuex\";\r\nimport { playlistMixin } from \"common/js/mixin\";\r\n\r\nconst RESERVED_HEIGHT = 40;\r\nconst transform = prefixStyle(\"transform\");\r\nconst backdrop = prefixStyle(\"backdrop-filter\");\r\nexport default {\r\n  mixins: [playlistMixin],\r\n  props: {\r\n    bgImage: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    songs: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    rank: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      scrollY: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    bgStyle() {\r\n      return `background-image:url(${this.bgImage})`;\r\n    },\r\n  },\r\n  created() {\r\n    this.probeType = 3;\r\n    this.listenScroll = true;\r\n  },\r\n  mounted() {\r\n    this.imageHeight = this.$refs.bgImage.clientHeight;\r\n    // layer的最大偏移量\r\n    this.minTransalteY = -this.imageHeight + RESERVED_HEIGHT;\r\n    this.$refs.list.$el.style.top = `${this.imageHeight}px`;\r\n  },\r\n  methods: {\r\n    handlePlaylist(playlist) {\r\n      const bottom = playlist.length > 0 ? \"60px\" : \"\";\r\n      this.$refs.list.$el.style.bottom = bottom;\r\n      this.$refs.list.refresh();\r\n    },\r\n    back() {\r\n      this.$router.back();\r\n    },\r\n    random() {\r\n      this.randomPlay({\r\n        list: this.songs,\r\n      });\r\n    },\r\n    scroll(pos) {\r\n      this.scrollY = pos.y;\r\n    },\r\n    selectItem(song, index) {\r\n      this.selectPlay({\r\n        list: this.songs,\r\n        index,\r\n      });\r\n    },\r\n    ...mapActions([\"selectPlay\", \"randomPlay\"]),\r\n  },\r\n  watch: {\r\n    scrollY(newVal) {\r\n      let translateY = Math.max(this.minTransalteY, newVal);\r\n      let scale = 1;\r\n      let zIndex = 0;\r\n      let blur = 0;\r\n      const percent = Math.abs(newVal / this.imageHeight);\r\n      if (newVal > 0) {\r\n        // 往下拉的时候\r\n        // scale = 1 + percent 保证了下拉的时候，图片的高度与列表相契合\r\n        scale = 1 + percent;\r\n        zIndex = 10;\r\n      } else {\r\n        // 往上滑的时候\r\n        blur = Math.min(20, percent * 20);\r\n      }\r\n\r\n      this.$refs.layer.style[transform] = `translate3d(0,${translateY}px,0)`;\r\n      this.$refs.filter.style[backdrop] = `blur(${blur}px)`;\r\n      // 当移动到最顶部的时候\r\n      if (newVal < this.minTransalteY) {\r\n        zIndex = 10;\r\n        this.$refs.bgImage.style.paddingTop = 0;\r\n        this.$refs.bgImage.style.height = `${RESERVED_HEIGHT}px`;\r\n        this.$refs.playBtn.style.display = \"none\";\r\n      } else {\r\n        this.$refs.bgImage.style.paddingTop = \"70%\";\r\n        this.$refs.bgImage.style.height = 0;\r\n        this.$refs.playBtn.style.display = \"\";\r\n      }\r\n      this.$refs.bgImage.style[transform] = `scale(${scale})`;\r\n      this.$refs.bgImage.style.zIndex = zIndex;\r\n    },\r\n  },\r\n  components: {\r\n    Scroll,\r\n    Loading,\r\n    SongList,\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n@import '~common/stylus/variable';\r\n@import '~common/stylus/mixin';\r\n\r\n.music-list {\r\n  position: fixed;\r\n  z-index: 100;\r\n  top: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  background: $color-background;\r\n\r\n  .back {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 6px;\r\n    z-index: 50;\r\n\r\n    .icon-back {\r\n      display: block;\r\n      padding: 10px;\r\n      font-size: $font-size-large-x;\r\n      color: $color-theme;\r\n    }\r\n  }\r\n\r\n  .title {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 10%;\r\n    z-index: 40;\r\n    width: 80%;\r\n    no-wrap();\r\n    text-align: center;\r\n    line-height: 40px;\r\n    font-size: $font-size-large;\r\n    color: $color-text;\r\n  }\r\n\r\n  .bg-image {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 0;\r\n    padding-top: 70%;\r\n    transform-origin: top;\r\n    background-size: cover;\r\n\r\n    .play-wrapper {\r\n      position: absolute;\r\n      bottom: 20px;\r\n      z-index: 50;\r\n      width: 100%;\r\n\r\n      .play {\r\n        box-sizing: border-box;\r\n        width: 135px;\r\n        padding: 7px 0;\r\n        margin: 0 auto;\r\n        text-align: center;\r\n        border: 1px solid $color-theme;\r\n        color: $color-theme;\r\n        border-radius: 100px;\r\n        font-size: 0;\r\n\r\n        .icon-play {\r\n          display: inline-block;\r\n          vertical-align: middle;\r\n          margin-right: 6px;\r\n          font-size: $font-size-medium-x;\r\n        }\r\n\r\n        .text {\r\n          display: inline-block;\r\n          vertical-align: middle;\r\n          font-size: $font-size-small;\r\n        }\r\n      }\r\n    }\r\n\r\n    .filter {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      background: rgba(7, 17, 27, 0.4);\r\n    }\r\n  }\r\n\r\n  .bg-layer {\r\n    position: relative;\r\n    height: 100%;\r\n    background: $color-background;\r\n  }\r\n\r\n  .list {\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    background: $color-background;\r\n\r\n    .song-list-wrapper {\r\n      padding: 20px 30px;\r\n    }\r\n\r\n    .loading-container {\r\n      position: absolute;\r\n      width: 100%;\r\n      top: 50%;\r\n      transform: translateY(-50%);\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./music-list.vue?vue&type=template&id=23cc0718&scoped=true&\"\nimport script from \"./music-list.vue?vue&type=script&lang=js&\"\nexport * from \"./music-list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./music-list.vue?vue&type=style&index=0&id=23cc0718&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"23cc0718\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-list.vue?vue&type=style&index=0&id=2015c8af&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"","import jsonp from 'common/js/jsonp'\r\nimport { commonParams, options } from './config'\r\n\r\n// 获取排行榜榜单\r\nexport function getTopList () {\r\n  const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_myqq_toplist.fcg'\r\n\r\n  const data = Object.assign({}, commonParams, {\r\n    uin: 0,\r\n    needNewCode: 1,\r\n    platform: 'h5'\r\n  })\r\n\r\n  return jsonp(url, data, options)\r\n}\r\n\r\n// 获取单个榜单详情歌曲\r\nexport function getMusicList (topid) {\r\n  const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_toplist_cp.fcg'\r\n\r\n  const data = Object.assign({}, commonParams, {\r\n    topid,\r\n    needNewCode: 1,\r\n    uin: 0,\r\n    tpl: 3,\r\n    page: 'detail',\r\n    type: 'top',\r\n    platform: 'h5'\r\n  })\r\n\r\n  return jsonp(url, data, options)\r\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=style&index=0&id=23cc0718&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"appear\":\"\",\"name\":\"slide\"}},[_c('music-list',{attrs:{\"rank\":_vm.rank,\"title\":_vm.title,\"bg-image\":_vm.bgImage,\"songs\":_vm.songs}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <transition appear name=\"slide\">\r\n    <music-list\r\n      :rank=\"rank\"\r\n      :title=\"title\"\r\n      :bg-image=\"bgImage\"\r\n      :songs=\"songs\"\r\n    ></music-list>\r\n  </transition>\r\n</template>\r\n\r\n<script>\r\nimport MusicList from \"components/music-list/music-list\";\r\nimport { getMusicList } from \"api/rank\";\r\nimport { ERR_OK } from \"api/config\";\r\nimport { mapGetters } from \"vuex\";\r\nimport { createSong, isValidMusic, processSongsUrl } from \"common/js/song\";\r\nexport default {\r\n  computed: {\r\n    title() {\r\n      return this.topList.topTitle;\r\n    },\r\n    bgImage() {\r\n      if (this.songs.length) {\r\n        return this.songs[0].image;\r\n      }\r\n      return \"\";\r\n    },\r\n    ...mapGetters([\"topList\"]),\r\n  },\r\n  data() {\r\n    return {\r\n      songs: [],\r\n      rank: true,\r\n    };\r\n  },\r\n  created() {\r\n    this._getMusicList();\r\n  },\r\n  methods: {\r\n    _getMusicList() {\r\n      if (!this.topList.id) {\r\n        this.$router.push(\"/rank\");\r\n        return;\r\n      }\r\n      getMusicList(this.topList.id).then((res) => {\r\n        if (res.code === ERR_OK) {\r\n          processSongsUrl(this._normalizeSongs(res.songlist)).then((songs) => {\r\n            this.songs = songs;\r\n          });\r\n        }\r\n      });\r\n    },\r\n    _normalizeSongs(list) {\r\n      let ret = [];\r\n      list.forEach((item) => {\r\n        const musicData = item.data;\r\n        if (isValidMusic(musicData)) {\r\n          ret.push(createSong(musicData));\r\n        }\r\n      });\r\n      return ret;\r\n    },\r\n  },\r\n  components: {\r\n    MusicList,\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n.slide-enter-active, .slide-leave-active {\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.slide-enter, .slide-leave-to {\r\n  transform: translate3d(100%, 0, 0);\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./top-list.vue?vue&type=template&id=2015c8af&scoped=true&\"\nimport script from \"./top-list.vue?vue&type=script&lang=js&\"\nexport * from \"./top-list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./top-list.vue?vue&type=style&index=0&id=2015c8af&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2015c8af\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}